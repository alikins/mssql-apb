---
version: 1.0
name: mssql-apb
description: APB to deploy SQL Server on Linux
bindable: true
async: optional
metadata:
  displayName: SQL Server on Linux (APB)
  imageUrl:
    https://raw.githubusercontent.com/ansibleplaybookbundle/mssql-apb/master/docs/img/sql-server.png
  documentationUrl:
    https://docs.microsoft.com/en-us/sql/linux/sql-server-linux-overview
  serviceName: mssql-server
  dependencies: ['docker.io/tchughesiv/mssql-server-linux']
tags:
  - database
plans:
  - name: ephemeral
    description: This plan deploys an ephemeral mssql-server.
    free: true
    default: true
    metadata:
      displayName: Ephemeral installation
      longDescription:
        This plan will deploy a MS SQL Server on Linux standalone
        using ephemeral storage
    parameters:
      - name: MSSQL_PASSWORD
        required: true
        default: "yourStrong@Password"
        pattern: "^[a-zA-Z0-9!@#$%^&*+=]{8,}$"
        type: string
        display_type: password
        title: "Password for the database admin (SA) user."
        description:
          "The password must be at least 8 characters long and contain
          characters from three of the following four sets: Uppercase
          letters, Lowercase letters, Base 10 digits, and Symbols. You
          can examine the error log by executing the docker logs command."
        display_group: MS SQL Config
      - name: MSSQL_DATABASE
        required: true
        default: sampledb
        pattern: "^[a-zA-Z0-9_-]*$"
        type: string
        title: Name of the MS SQL database accessed
        display_group: MS SQL Config
      - name: MSSQL_MEMORY_LIMIT
        default: 2Gi
        type: string
        title: Maximum amount of memory the container can use eg 512Mi 1Gi
        display_group: Environment Sizing
      - name: MSSQL_MEMORY_REQUEST
        default: 1Gi
        type: string
        title: Requested amount of memory for the container to start eg 1Gi 2Gi
        display_group: Environment Sizing
